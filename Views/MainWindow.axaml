<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Nexo.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="using:Nexo.Converters"
        mc:Ignorable="d" d:DesignWidth="1280" d:DesignHeight="800"
        x:Class="Nexo.Views.MainWindow"
        Icon="/Assets/avalonia-logo.ico"
        Title="Nexo"
        Background="#0D1117">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Styles>
        <Style Selector="Window">
            <Setter Property="FontFamily" Value="Spline Sans, Noto Sans, sans-serif"/>
        </Style>
        <Style Selector="TextBlock">
            <Setter Property="Foreground" Value="#C9D1D9"/>
        </Style>
        <Style Selector="Button">
            <Setter Property="Background" Value="#161B22"/>
            <Setter Property="Foreground" Value="#C9D1D9"/>
            <Setter Property="BorderBrush" Value="#30363D"/>
            <Setter Property="Margin" Value="0,0,5,0"/>
            <Setter Property="Padding" Value="10,5"/>
        </Style>
        <Style Selector="Button:pointerover">
            <Setter Property="Background" Value="#30363D"/>
        </Style>
        <Style Selector="TextBox">
            <Setter Property="Background" Value="#161B22"/>
            <Setter Property="Foreground" Value="#C9D1D9"/>
            <Setter Property="BorderBrush" Value="#30363D"/>
        </Style>
        <Style Selector="DataGrid">
            <Setter Property="Background" Value="#161B22"/>
            <Setter Property="Foreground" Value="#C9D1D9"/>
        </Style>
        <Style Selector="DataGridColumnHeader">
            <Setter Property="Background" Value="#1C2128"/>
            <Setter Property="Foreground" Value="#8B949E"/>
        </Style>
        <Style Selector="DataGridRow">
            <Setter Property="Background" Value="#161B22"/>
        </Style>
        <Style Selector="DataGridRow:selected">
            <Setter Property="Background" Value="#1C2128"/>
        </Style>
        <Style Selector="TabControl">
            <Setter Property="Background" Value="#161B22"/>
            <Setter Property="Foreground" Value="#C9D1D9"/>
        </Style>
        <Style Selector="TabItem">
            <Setter Property="Background" Value="#161B22"/>
            <Setter Property="Foreground" Value="#8B949E"/>
        </Style>
        <Style Selector="TabItem:selected">
            <Setter Property="Foreground" Value="#3B82F6"/>
            <Setter Property="BorderBrush" Value="#3B82F6"/>
        </Style>
    </Window.Styles>

    <Window.Resources>
        <converters:StringToVisibilityConverter x:Key="StringToVisibilityConverter" />
    </Window.Resources>

    <Grid>
        <!-- Header -->
        <Border Height="60" Background="#161B22" BorderThickness="0,0,0,1" BorderBrush="#30363D">
            <Grid Margin="10,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Logo -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <Border Width="32" Height="32" Background="#3B82F6" CornerRadius="16">
                        <TextBlock Text="N" Foreground="Black" FontWeight="Bold" 
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock Text="Nexo" FontSize="20" FontWeight="Bold" Margin="10,0,0,0" 
                               VerticalAlignment="Center"/>
                </StackPanel>

                <!-- User controls -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" 
                            VerticalAlignment="Center" Spacing="10">
                    <Button Command="{Binding ToggleThemeCommand}" Width="40" Height="40" 
                            CornerRadius="20" Padding="0">
                        <TextBlock Text="游깿" FontSize="16"/>
                    </Button>
                    <Border Width="40" Height="40" CornerRadius="20" 
                            Background="#3B82F6" ClipToBounds="True">
                        <Image Source="https://lh3.googleusercontent.com/aida-public/AB6AXuDiv7_2VJ7AsuMBEkxYL0R2llSW42iCdn5se5sZNple_EMswH1df6Sf6sxLC5eFo2We4yr69ADq_x5btTetalFscsGX17r4dfyl0eatyh5mr5YJghwx1VwCNNNCyrycZ1MR12jy7UhtOX0__LqXT1IKN6JlDWx3zoI7YGJMs5hfPewGesi2_cSlmKzD3kCfR4oFsmqHxvMe6f7qK5gIW4jTygpSpN1YImzQZw-iiA1HQegudIN4RsaOwghd_hhXGTZo5qTCn1C31SvH"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main content -->
        <Grid Margin="0,60,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <!-- Emulators panel -->
            <Border Grid.Column="0" Background="#161B22" Margin="10" CornerRadius="5">
                <StackPanel Margin="15">
                    <TextBlock Text="Emuladores" FontSize="20" FontWeight="Bold" Margin="0,0,0,15"/>
                    
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox Watermark="Buscar emulador..." Classes="search-box"/>
                        <Button Grid.Column="1" Content="Filtrar" Margin="5,0,0,0"/>
                    </Grid>
                    
                    <DataGrid ItemsSource="{Binding Emulators}" SelectedItem="{Binding SelectedEmulator}" 
                              AutoGenerateColumns="False" IsReadOnly="True" Height="300">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Nombre" Binding="{Binding Name}" Width="*"/>
                            <DataGridTextColumn Header="Extensi칩n" Binding="{Binding ExtensionsDisplay}" Width="Auto"/>
                            <DataGridTextColumn Header="Configuraci칩n" Binding="{Binding Configuration}" Width="Auto"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0" Spacing="5">
                        <Button Content="A침adir" Command="{Binding AddEmulatorCommand}" 
                                Background="#3B82F6" Foreground="Black" FontWeight="Bold"/>
                        <Button Content="Editar" Command="{Binding EditEmulatorCommand}"/>
                        <Button Content="Eliminar" Command="{Binding DeleteEmulatorCommand}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Games panel -->
            <Border Grid.Column="1" Background="#161B22" Margin="10" CornerRadius="5">
                <StackPanel Margin="15">
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Text="Mis Juegos" FontSize="20" FontWeight="Bold" VerticalAlignment="Center"/>
                        
                        <Button Grid.Column="1" Content="Abrir Juego" Command="{Binding OpenGameCommand}" 
                                Background="#3B82F6" Foreground="Black" FontWeight="Bold"/>
                    </Grid>
                    
                    <TabControl>
                        <TabItem Header="Todos los juegos">
                            <TextBlock Text="Aqu칤 se mostrar치n todos los juegos" HorizontalAlignment="Center" 
                                       VerticalAlignment="Center" Margin="0,50"/>
                        </TabItem>
                        <TabItem Header="Favoritos">
                            <TextBlock Text="Aqu칤 se mostrar치n los juegos favoritos" HorizontalAlignment="Center" 
                                       VerticalAlignment="Center" Margin="0,50"/>
                        </TabItem>
                        <TabItem Header="Recientes">
                            <TextBlock Text="Aqu칤 se mostrar치n los juegos recientes" HorizontalAlignment="Center" 
                                       VerticalAlignment="Center" Margin="0,50"/>
                        </TabItem>
                    </TabControl>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Notification -->
        <Border Background="#262626" CornerRadius="5" Padding="15" HorizontalAlignment="Center" 
                VerticalAlignment="Bottom" Margin="0,0,0,20"
                IsVisible="{Binding Message, Converter={StaticResource StringToVisibilityConverter}}">
            <TextBlock Text="{Binding Message}" Foreground="White" FontWeight="Bold"/>
        </Border>
    </Grid>
</Window>